<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>S4 Class for describing the penalization process — penfaPenalty-class • penfa</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="S4 Class for describing the penalization process — penfaPenalty-class" />
<meta property="og:description" content="The penfaPenalty class provides information on the
penalization process, such as the user-specified penalty functions, the
optimal values of the tuning parameters, and the penalty matrices at
convergence." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PQWMEC6S1Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PQWMEC6S1Z');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">penfa</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/automatic-tuning-selection.html">Penalized Factor Analysis</a>
    </li>
    <li>
      <a href="../articles/grid-search-tuning-selection.html">Penalized Factor Analysis: grid search</a>
    </li>
    <li>
      <a href="../articles/multiple-group-analysis.html">Penalized Multiple-Group Factor Analysis</a>
    </li>
    <li>
      <a href="../articles/articles/plotting-penalty-matrix.html">Plotting Penalty Matrices</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/egeminiani/penfa/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>S4 Class for describing the penalization process</h1>
    <small class="dont-index">Source: <a href='https://github.com/egeminiani/penfa/blob/master/R/class.R'><code>R/class.R</code></a></small>
    <div class="hidden name"><code>penfaPenalty-class.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>penfaPenalty</code> class provides information on the
penalization process, such as the user-specified penalty functions, the
optimal values of the tuning parameters, and the penalty matrices at
convergence.</p>
    </div>



    <h2 class="hasAnchor" id="slots"><a class="anchor" href="#slots"></a>Slots</h2>

    

<dl>
<dt><code>strategy</code></dt><dd><p>Character. The strategy used for the selection of the tuning
parameter(s). If <code>strategy = "auto"</code>, the optimal values of the tuning
parameters are determined via the automatic tuning parameter procedure; if
<code>strategy = "fixed"</code>, a penalized factor model with the values of the
tuning parameters stored in the option <code>eta</code> is estimated.</p></dd>

<dt><code>penalty</code></dt><dd><p>List. A list of the user-specified penalty functions for
sparsity ("shrink") and parameter equivalence ("diff").</p></dd>

<dt><code>tuning</code></dt><dd><p>List. A named list containing the optimal values of the tuning
parameter(s) if <code>strategy = "auto"</code> or the user-specified fixed
values of the tuning parameter(s) if <code>strategy = "fixed"</code>. The list
has two components with names "shrink" and "diff", and refers to the tuning
parameters used for shrinkage and group equivalence, respectively. The
components of the list are, in turn, the named vectors specifying the type
of parameter matrices or vectors that were penalized.</p></dd>

<dt><code>pmat</code></dt><dd><p>List. A named list containing the names of the parameter matrices
and vectors that were penalized for sparsity ("shrink") and/or group
equivalence ("diff").</p></dd>

<dt><code>pen.idx</code></dt><dd><p>List. A named list with the indices of the parameters that were
penalized for sparsity ("shrink") and/or group equivalence ("diff").</p></dd>

<dt><code>Sh.info</code></dt><dd><p>List. A list of the penalization terms, vectors and matrices
evaluated at the optimal values of the tuning parameters. In particular,
its argument <code>S.h</code> returns the estimated penalty matrix. If the factor
model is penalized only through a shrinkage penalty (i.e.,
<code>pen.shrink</code> is not <code>'none'</code>), and there is no penalization on
the differences (i.e., <code>pen.diff = 'none'</code>), then <code>S.h</code> is a
diagonal matrix whose elements precisely quantify the extent to which each
model parameter has been penalized.</p></dd>

<dt><code>extra</code></dt><dd><p>List. A list possibly containing additional information on the
penalization process, such as the hyperparameter values for some penalty
functions (e.g., for the alasso, the value of the exponent and the adaptive
weights.)</p></dd>

<dt><code>automatic</code></dt><dd><p>List. If <code>strategy = "auto"</code>, it contains information on
the automatic multiple tuning parameter procedure, such as the optimal
values of the tuning parameters, the convergence status, the specified
value of the influence factor, the number of necessary iterations, and the
tolerance level.</p></dd>

</dl>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='penfa.html'>penfa</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>ccdata</span><span class='op'>)</span>

<span class='va'>syntax</span> <span class='op'>=</span> <span class='st'>'help  =~   h1 + h2 + h3 + h4 + h5 + h6 + h7 + 0*v1 + v2 + v3 + v4 + v5
          voice =~ 0*h1 + h2 + h3 + h4 + h5 + h6 + h7 +   v1 + v2 + v3 + v4 + v5'</span>

<span class='va'>alasso_fit</span> <span class='op'>&lt;-</span> <span class='fu'><a href='penfa.html'>penfa</a></span><span class='op'>(</span><span class='co'>## factor model</span>
                    model  <span class='op'>=</span> <span class='va'>syntax</span>,
                    data   <span class='op'>=</span> <span class='va'>ccdata</span>,
                    std.lv <span class='op'>=</span> <span class='cn'>TRUE</span>,
                    <span class='co'>## penalization</span>
                    pen.shrink <span class='op'>=</span> <span class='st'>"alasso"</span>,
                    eta <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>shrink <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"lambda"</span> <span class='op'>=</span> <span class='fl'>0.01</span><span class='op'>)</span>, diff <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"none"</span> <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>,
                    <span class='co'>## automatic procedure</span>
                    strategy <span class='op'>=</span> <span class='st'>"auto"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Computing weights for alasso (ML estimates)... done.
#&gt; 
#&gt; Automatic procedure: 
#&gt; Iteration  1 : 0.00298271 
#&gt; Iteration  2 : 0.00452604 
#&gt; 
#&gt; Largest absolute gradient value: 12.76355181
#&gt; Fisher information matrix is positive definite
#&gt; Eigenvalue range: [180.2917, 9189645]
#&gt; Trust region iterations: 15 
#&gt; Factor solution: admissible 
#&gt; Effective degrees of freedom: 27.12936  </div><div class='input'>
<span class='va'>alasso_fit</span><span class='op'>@</span><span class='va'>Penalize</span>
</div><div class='output co'>#&gt;   Strategy                                                 auto
#&gt;   Influence factor                                            4
#&gt;   Number of two-steps (automatic)                             2
#&gt;                                                                
#&gt;   Penalty function:                                            
#&gt;     Sparsity                                             alasso
#&gt;                                                                
#&gt;   Additional tuning parameter                                  
#&gt;     alasso                                                    1
#&gt;                                                                
#&gt;   Optimal tuning parameter:                                    
#&gt;     Sparsity                                                   
#&gt;      - Factor loadings                                    0.005
#&gt;                                                                </div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>alasso_fit</span><span class='op'>@</span><span class='va'>Penalize</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Formal class 'penfaPenalty' [package "penfa"] with 8 slots
#&gt;   ..@ strategy : chr "auto"
#&gt;   ..@ penalty  :List of 2
#&gt;   .. ..$ shrink: chr "alasso"
#&gt;   .. ..$ diff  : chr "none"
#&gt;   ..@ tuning   :List of 2
#&gt;   .. ..$ shrink: Named num 0.00453
#&gt;   .. .. ..- attr(*, "names")= chr "lambda"
#&gt;   .. ..$ diff  : Named num 0
#&gt;   .. .. ..- attr(*, "names")= chr "none"
#&gt;   ..@ pmat     :List of 2
#&gt;   .. ..$ shrink: chr "lambda"
#&gt;   .. ..$ diff  : chr "none"
#&gt;   ..@ pen.idx  :List of 2
#&gt;   .. ..$ shrink:List of 1
#&gt;   .. .. ..$ lambda: int [1:22] 1 2 3 4 5 6 7 8 9 10 ...
#&gt;   .. ..$ diff  : list()
#&gt;   ..@ Sh.info  :List of 5
#&gt;   .. ..$ S.h1     : num [1, 1] 25.4
#&gt;   .. ..$ S.h2     : num [1:35, 1] 4.44 3.84 4.46 3.52 4.43 ...
#&gt;   .. .. ..- attr(*, "dimnames")=List of 2
#&gt;   .. .. .. ..$ : chr [1:35] "help=~h1" "help=~h2" "help=~h3" "help=~h4" ...
#&gt;   .. .. .. ..$ : NULL
#&gt;   .. ..$ S.h      : 'penfaPenMat' num [1:35, 1:35] 5.8 0 0 0 0 ...
#&gt;   .. .. ..- attr(*, "dimnames")=List of 2
#&gt;   .. .. .. ..$ : chr [1:35] "help=~h1" "help=~h2" "help=~h3" "help=~h4" ...
#&gt;   .. .. .. ..$ : chr [1:35] "help=~h1" "help=~h2" "help=~h3" "help=~h4" ...
#&gt;   .. ..$ SS.shrink:List of 1
#&gt;   .. .. ..$ lambda: 'penfaPenMat' num [1:35, 1:35] 5.8 0 0 0 0 ...
#&gt;   .. .. .. ..- attr(*, "dimnames")=List of 2
#&gt;   .. .. .. .. ..$ : chr [1:35] "help=~h1" "help=~h2" "help=~h3" "help=~h4" ...
#&gt;   .. .. .. .. ..$ : chr [1:35] "help=~h1" "help=~h2" "help=~h3" "help=~h4" ...
#&gt;   .. ..$ SS.diff  :List of 1
#&gt;   .. .. ..$ none: 'penfaPenMat' num [1:35, 1:35] 0 0 0 0 0 0 0 0 0 0 ...
#&gt;   .. .. .. ..- attr(*, "dimnames")=List of 2
#&gt;   .. .. .. .. ..$ : chr [1:35] "help=~h1" "help=~h2" "help=~h3" "help=~h4" ...
#&gt;   .. .. .. .. ..$ : chr [1:35] "help=~h1" "help=~h2" "help=~h3" "help=~h4" ...
#&gt;   ..@ extra    :List of 2
#&gt;   .. ..$ a.alasso: num 1
#&gt;   .. ..$ weights : Named num [1:35] 0.782 0.905 0.779 0.986 0.783 ...
#&gt;   .. .. ..- attr(*, "names")= chr [1:35] "help=~h1" "help=~h2" "help=~h3" "help=~h4" ...
#&gt;   ..@ automatic:List of 8
#&gt;   .. ..$ optimal.eta: num 0.00453
#&gt;   .. ..$ conv       : logi TRUE
#&gt;   .. ..$ gamma      : num 4
#&gt;   .. ..$ iter       : num 2
#&gt;   .. ..$ iter.inner : num 43
#&gt;   .. ..$ iterlim    : num 50
#&gt;   .. ..$ tol        : num 1e-07
#&gt;   .. ..$ R          : num [1:35, 1:35] -1.392 -1.033 -0.601 -0.106 0.522 ...</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Elena Geminiani, Giampiero Marra, Irini Moustaki.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


